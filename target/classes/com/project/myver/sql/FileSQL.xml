<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
"HTTP://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="file">

	<!-- 21.05.03 파일 삽입 -->
	<insert id="insertFile" parameterType="fileDTO" 
			useGeneratedKeys="true" keyProperty="file_no">
		insert into file (area, original_name, saved_name, file_size, date)
		values (#{area}, #{original_name}, #{saved_name}, #{file_size}, SYSDATE())
	</insert>
	
	<!-- 21.05.04 'file_no'에 해당하는 레코드 크기 가져오기 -->
	<select id="selectRecordSize" parameterType="Integer" resultType="Integer">
		select ifnull(MAX(LENGTH(file_no)+LENGTH(area)+LENGTH(saved_name)+LENGTH(original_name)+LENGTH(file_size)+LENGTH(date)+LENGTH(can_delete)),0) from file
		where file_no = #{file_no}
	</select>
	
	<!-- 
	<update id="logDate" parameterType="String">
		update member SET log_date = SYSDATE() where id = #{id}
	</update> -->
</mapper>
	
